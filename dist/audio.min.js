function SimplePlayer(t){this.songList=t.songList?t.songList:[],this.compare=t.compare,this.mode=t.mode,this.audio=null,this.currentSong=null,this.listener={}}function timeConvert(t){var e,i;return e=Math.floor(t/60),e=e>=10?""+e:"0"+e,i=Math.floor(t%60),i=i>=10?""+i:"0"+i,e+":"+i}SimplePlayer.prototype.setOnSongLoadListener=function(t){this.listener.onSongLoad=t},SimplePlayer.prototype.setOnPlayPauseListener=function(t){this.listener.onPlayPause=t},SimplePlayer.prototype.setOnProgressListener=function(t){this.listener.onProgress=t},SimplePlayer.prototype.setOnMetaLoadedListener=function(t){this.listener.onMetaLoaded=t},SimplePlayer.prototype.setOnSongRemoveListener=function(t){this.listener.onSongRemove=t},SimplePlayer.prototype.setOnSongListChangeListener=function(t){this.listener.onSongListChange=t},SimplePlayer.prototype.setOnEndedListener=function(t){this.listener.onEnded=t},SimplePlayer.prototype.insertSongList=function(t){var e;for(e=t.length-1;e>=0;e--)this.songList.unshift(t[e]);this.listener.onSongListChange&&this.listener.onSongListChange(this.songList),this.load()},SimplePlayer.prototype.removeSong=function(t){var e=this.compare({mid:t},this.songList);t==this.currentSong.mid&&this.songList.length>1&&this.next(),this.songList.splice(e,1),this.listener.onSongRemove&&this.listener.onSongRemove(this.currentSong,this.songList)},SimplePlayer.prototype.load=function(t){if(0!==this.songList.length){if("number"==typeof t){var e=this.compare({mid:t},this.songList);this.currentSong=e!=-1?this.songList[e]:this.songList[0]}else this.currentSong=t?t:this.songList[0];this.audio&&!this.audio.paused&&(this.audio.pause(),this.audio=null,this.listener.onEnded&&this.listener.onEnded()),this.audio=new Audio(this.currentSong.url),this.setAudioListener(),this.listener.onSongLoad&&this.listener.onSongLoad(this.currentSong),this.playpause()}},SimplePlayer.prototype.setAudioListener=function(){var t=this;this.audio.onloadedmetadata=function(){var e={duration:timeConvert(t.audio.duration),cover:t.currentSong.cover,author:t.currentSong.author,album:t.currentSong.album,title:t.currentSong.title};t.listener.onMetaLoaded&&t.listener.onMetaLoaded(e)},this.audio.ontimeupdate=function(){t.listener.onProgress&&t.listener.onProgress({percent:t.audio.currentTime/t.audio.duration*100,rest:timeConvert(t.audio.duration-t.audio.currentTime)})},this.audio.onended=function(){t.listener.onEnded&&t.listener.onEnded(),t.next()}},SimplePlayer.prototype.playpause=function(){this.listener.onPlayPause&&this.listener.onPlayPause(this.audio.paused),this.audio&&!this.audio.paused?(console.log("pause"),this.audio.pause()):this.audio&&this.audio.paused&&(console.log("play"),this.audio.play())},SimplePlayer.prototype.next=function(){var t=0;this.compare&&(t=(this.compare(this.currentSong,this.songList)+1)%this.songList.length),this.load(this.songList[t])},SimplePlayer.prototype.preview=function(){var t=0;this.compare&&(t=(this.compare(this.currentSong,this.songList)-1)%this.songList.length),t<0&&(t=this.songList.length-1),this.load(this.songList[t])},SimplePlayer.prototype.seek=function(t){this.audio&&(this.audio.currentTime=this.audio.duration*t)},SimplePlayer.prototype.volume=function(t){this.audio&&(this.audio.volume=t)},"function"==typeof define&&define([],function(){return{SimplePlayer:SimplePlayer}});